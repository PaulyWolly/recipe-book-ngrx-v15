{"ast":null,"code":"import { map } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport * as AuthActions from '../auth/store/auth.actions';\nimport * as RecipeActions from '../recipes/store/recipe.actions';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../shared/dropdown.directive\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = function () {\n  return [\"/recipes\"];\n};\nfunction HeaderComponent_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 11)(1, \"a\", 12);\n    i0.ɵɵtext(2, \"Recipes\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nconst _c1 = function () {\n  return [\"/shopping-list\"];\n};\nfunction HeaderComponent_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 11)(1, \"a\", 12);\n    i0.ɵɵtext(2, \"Shopping List\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nfunction HeaderComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 13);\n    i0.ɵɵtext(1, \" Welcome: \");\n    i0.ɵɵelementStart(2, \"input\", 14, 15);\n    i0.ɵɵlistener(\"ngModelChange\", function HeaderComponent_li_10_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.loginEmail = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.loginEmail);\n  }\n}\nfunction HeaderComponent_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 16);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_11_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.onLogout());\n    });\n    i0.ɵɵtext(2, \"Logout\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 17)(1, \"a\", 18);\n    i0.ɵɵtext(2, \" Manage \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 19)(4, \"li\")(5, \"a\", 16);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_12_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.onSaveData());\n    });\n    i0.ɵɵtext(6, \"Save Data\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"li\")(8, \"a\", 16);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_12_Template_a_click_8_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onFetchData());\n    });\n    i0.ɵɵtext(9, \"Fetch Data\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(store, route) {\n      this.store = store;\n      this.route = route;\n      this.isAuthenticated = false;\n      this.loginEmail = '';\n    }\n    ngOnInit() {\n      this.userSub = this.store.select('auth').pipe(map(authState => authState.user)).subscribe(user => {\n        this.isAuthenticated = !!user;\n        // console.log(!user);\n        // console.log(!!user);\n        this.getEmailFromLocalStorage();\n      });\n    }\n    ngAfterViewInit() {\n      this.route.navigate([this.route.url]);\n      this.getEmailFromLocalStorage();\n    }\n    getEmailFromLocalStorage() {\n      const emailLS = localStorage.getItem('email');\n      // const newObject = JSON.parse(loginEmail);\n      this.loginEmail = emailLS;\n    }\n    onSaveData() {\n      // this.dataStorageService.storeRecipes();\n      this.store.dispatch(RecipeActions.storeRecipes());\n    }\n    onFetchData() {\n      // this.dataStorageService.fetchRecipes().subscribe();\n      this.store.dispatch(RecipeActions.fetchRecipes());\n    }\n    onLogout() {\n      localStorage.clear();\n      this.store.dispatch(new AuthActions.Logout());\n    }\n    ngOnDestroy() {\n      this.userSub.unsubscribe();\n      localStorage.clear();\n    }\n  }\n  HeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n    return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  HeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeaderComponent,\n    selectors: [[\"app-header\"]],\n    decls: 13,\n    vars: 5,\n    consts: [[1, \"navbar\", \"navbar-expand-md\", \"navbar-light\", \"fixed-top\", \"bg-light\"], [1, \"container-fluid\"], [1, \"navbar-header\"], [\"routerLink\", \"/\", 1, \"navbar-brand\"], [1, \"recipe-links\", \"collapse\", \"navbar-collapse\"], [1, \"nav\", \"navbar-nav\"], [\"routerLinkActive\", \"active\", 4, \"ngIf\"], [1, \"nav\", \"navbar-nav\", \"navbar-right\"], [\"class\", \"loggedInUser\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"dropdown\", \"appDropdown\", \"\", 4, \"ngIf\"], [\"routerLinkActive\", \"active\"], [3, \"routerLink\"], [1, \"loggedInUser\"], [1, \"loggedInUser\", 3, \"ngModel\", \"ngModelChange\"], [\"ctrl\", \"ngModel\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [\"appDropdown\", \"\", 1, \"dropdown\"], [\"role\", \"button\", 1, \"dropdown-toggle\", 2, \"cursor\", \"pointer\", \"margin-right\", \"20px\"], [1, \"dropdown-menu\"]],\n    template: function HeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"a\", 3);\n        i0.ɵɵtext(4, \"Recipe Book\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"ul\", 5);\n        i0.ɵɵtemplate(7, HeaderComponent_li_7_Template, 3, 2, \"li\", 6);\n        i0.ɵɵtemplate(8, HeaderComponent_li_8_Template, 3, 2, \"li\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ul\", 7);\n        i0.ɵɵtemplate(10, HeaderComponent_li_10_Template, 4, 1, \"li\", 8);\n        i0.ɵɵtemplate(11, HeaderComponent_li_11_Template, 3, 0, \"li\", 9);\n        i0.ɵɵtemplate(12, HeaderComponent_li_12_Template, 10, 0, \"li\", 10);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n      }\n    },\n    dependencies: [i3.NgIf, i2.RouterLink, i2.RouterLinkActive, i4.DropdownDirective, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n    styles: [\"li.loggedInUser[_ngcontent-%COMP%]{position:relative;top:15px}li.active[_ngcontent-%COMP%]{background-color:#e6e4e4}input.loggedInUser.ng-pristine.ng-valid[_ngcontent-%COMP%]{border:none;position:relative;margin-right:20px;background-color:transparent;font-weight:700}.navbar[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%]{font-size:16px}.navbar[_ngcontent-%COMP%]{border-bottom:1px solid #808080}.navbar-brand[_ngcontent-%COMP%]{color:#00f;font-size:20px;margin-left:20px;position:relative;left:10px}.recipe-links[_ngcontent-%COMP%]{position:relative;left:25px;z-index:1000}.bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}.b-example-divider[_ngcontent-%COMP%]{height:3rem;background-color:#0000001a;border:solid rgba(0,0,0,.15);border-width:1px 0}.b-example-vr[_ngcontent-%COMP%]{flex-shrink:0;width:1.5rem;height:100vh}.bi[_ngcontent-%COMP%]{vertical-align:-.125em;fill:currentColor}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}\"]\n  });\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}